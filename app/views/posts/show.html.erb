<%= render 'shared/header' %>
<section class="flex flex-col gap-3">
	<div class="mt-3">
		<div class="flex justify-between items-center p-3 mx-2 border border-gray-200">
			<h3><%= content_tag :span, "Post # #{@post.id} by #{@post.author.name}" %></h3>
			<%= content_tag :span, "Comments: #{@post.comments_counter}, Likes: #{@post.likes_counter}" %>
		</div>
	</div>
	<div>
		<%= content_tag :div, class: "mx-2 border" do %>
		<%= button_to "ðŸ–¤ Like", user_post_likes_path(user_id: current_user.id, post_id: @post.id), method: :post %>
		<% end %>
	
	<div class="border mx-2 p-3 flex flex-col gap-3">
		<h2 class="font-bold"><%= @post.title%></h2>
		<span>
			<% if can? :destroy , @post  %>
			<%= button_to "DELETE POST", user_post_path(current_user, @post), method: :delete ,class: "hover:bg-blue-800 duration-90 bg-blue-700 border-blue-700 p-2 text-white rounded-sm text-[11px]"%>
			<%end%>
		</span>
		<p class="title-bio"><%= @post.text %></p>
		<ul>
			<h3>ðŸ’¬ Comments:</h3>
			<% @post.comments.each do|comment|%>
				<li><%= content_tag :span, "#{comment.author.name}: #{comment.text}" %></li>
				<span>
					<% if can? :destroy, comment %>
					<%= button_to "DELETE COMMENT", user_post_comment_path(comment.author, comment.post, comment), method: :delete, class: "hover:bg-blue-800 duration-90 bg-blue-700 border-blue-700 p-2 text-white rounded-sm text-[11px] mt-2" %>
					<% end %>
				</span>
			<%end%>
		</ul>
	</div>
	<div class="px-10">
	<%= render "comments/create", locals: { post_id: @post_id, comment: @comment } %>
	</div>
</section>